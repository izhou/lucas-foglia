{% extends "layouts/base.njk" %}

{% set css %}
  {% include "styles/home.css" %}
  {% include "styles/gallery.css" %}
{%endset%}

{% block gridMiddleRight %}

<div class="home-projects">
  {%- for project in metadata.timeline -%}
    <div class="home-project" data-project-index="{{loop.index0}}">
      <div class="home-project-spacer"></div>
      <div class="home-project-gallery gallery gallery-slideshow" class="grid-right-content">
        {%- for photo in project.gallery -%}
          <div class="gallery-photo-container {% if loop.index0 !=0 %}is-hidden{% endif %}" data-gallery-index="{{loop.index0}}">
            <img 
              class="lazyload gallery-photo home-gallery-photo gallery-photo-link"
              src="{% imageUrlFor photo, true %}"
              data-src="{% imageUrlFor photo %}"
              alt="{{photo.alt}}"
              onclick="onImageClick('/{{project.slug.current}}/#i{{loop.index0}}');"
              style="aspect-ratio: {{project.aspect_ratio_numerator}}/{{project.aspect_ratio_denominator}};"/>
          </div>
        {%- endfor -%}
      </div>

      <h3 class="home-project-title"><a href="/{{project.slug.current}}">{{project.title}}</a></h3>
    </div>
  {%- endfor -%}
</div>

{%endblock%}

{% block js %}
  <script src="{{ "/assets/lazysizes.min.js" | url }}"></script>
  <script>
    {% include "js/gallery.js" %}
    {% include "js/home.js" %}
  </script>
{% endblock %}